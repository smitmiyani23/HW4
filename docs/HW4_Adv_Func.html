<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ST558 HW4: Hodge Podge</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ST558 HW4: Hodge Podge</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="document-details" class="level1">
<h1>Document Details</h1>
<section id="author-smit-miyani" class="level4">
<h4 class="anchored" data-anchor-id="author-smit-miyani">Author: <em>Smit Miyani</em></h4>
</section>
<section id="collaborators-na" class="level4">
<h4 class="anchored" data-anchor-id="collaborators-na">Collaborators: <em>N/A</em></h4>
</section>
<section id="assignment-hw4" class="level4">
<h4 class="anchored" data-anchor-id="assignment-hw4">Assignment: <em>HW4</em></h4>
</section>
<section id="date-23jun24" class="level4">
<h4 class="anchored" data-anchor-id="date-23jun24">Date: <em>23JUN24</em></h4>
</section>
<section id="purpose" class="level4">
<h4 class="anchored" data-anchor-id="purpose">Purpose</h4>
<p><em>General practice in working with advanced functions.</em><br>
</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">message =</span> <span class="cn">TRUE</span>, <span class="at">warning =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Remove Warnings</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="tasks" class="level1">
<h1>Tasks</h1>
<section id="task-1-conceptual-questions" class="level2">
<h2 class="anchored" data-anchor-id="task-1-conceptual-questions">Task 1: Conceptual Questions</h2>
<ol type="1">
<li><p>What is the purpose of the <code>lapply()</code> function? What is the equivalent <code>purrr</code> function?</p>
<blockquote class="blockquote">
<p>The purpose of <code>lapply()</code>: <code>lapply()</code> in R is used to apply a function to each element of a list or vector, returning a list of the results. In the <code>purrr</code> package, the equivalent function to <code>lapply()</code> is <code>map()</code>.</p>
</blockquote></li>
<li><p>Suppose we have a list called <code>my_list</code>. Each element of the list is a numeric data frame (all columns are numeric). We want use <code>lapply()</code> to run the code <code>cor(numeric_matrix, method = "kendall")</code> on each element of the list. Write code to do this below</p>
<blockquote class="blockquote">
<p><code>lapply(my_list, function(df) cor(df, method = "kendall"))</code>.</p>
</blockquote></li>
<li><p>What are two advantages of using <code>purrr</code> functions instead of the BaseR <code>apply</code> family?</p>
<blockquote class="blockquote">
<p>1. <code>purrr</code> functions always return outputs in a predictable format (usually a list), regardless of the input data structure. making it easier to work with results consistently across different scenarios.</p>
<p>2. <code>purrr</code> integrates with other <code>purrr</code> functions and the tidyverse ecosystem very well, making it easier to combine operations and make chaining easy thus reduces the need for writing custom helper functions.</p>
</blockquote></li>
<li><p>What is a side-effect function?</p>
<blockquote class="blockquote">
<p>A side effect function is a function that not only computes a result but also performs actions that may alter the program’s state or interact with the external environment.</p>
</blockquote></li>
<li><p>Why can you name a variable <code>sd</code> in a function and not cause any issues with the <code>sd</code> function?</p>
<blockquote class="blockquote">
<p>Because R keeps track of variables separately within each function. When R sees <code>sd</code> inside the function, it looks first at the function’s own set of variables before checking if <code>sd</code> is a function. This avoids conflicts and lets us use the same name <code>sd</code> for a variable without affecting how the <code>sd</code> function works globally.</p>
</blockquote></li>
</ol>
</section>
<section id="task-2-writing-r-functions" class="level2">
<h2 class="anchored" data-anchor-id="task-2-writing-r-functions">Task 2: Writing R Functions</h2>
<section id="loading-packages" class="level3">
<h3 class="anchored" data-anchor-id="loading-packages">Loading Packages</h3>
<p>Reading required tidyverse packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.3.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readr' was built under R version 4.3.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.3.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lubridate' was built under R version 4.3.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
</section>
<section id="question-1-creating-getrmse-function" class="level3">
<h3 class="anchored" data-anchor-id="question-1-creating-getrmse-function">Question 1: Creating <code>getRMSE()</code> function</h3>
<p>Creating a function <code>getRMSE</code> that takes in vector of observations, and predictions and returns RMSE. Using <code>…</code> to have additional arguments for handling of NA values which would be used within the <code>mean()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>getRMSE <span class="ot">&lt;-</span> <span class="cf">function</span>(responses, predictions, ...) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ensuring the responses and predictions are numeric vectors of the same length</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(responses) <span class="sc">!=</span> <span class="fu">length</span>(predictions) <span class="sc">|</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(responses)) <span class="sc">|</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(predictions))) {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Input vectors 'responses' and 'predictions' must be numeric and of the same length."</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculating RMSE. </span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  rmse <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((responses <span class="sc">-</span> predictions)<span class="sc">^</span><span class="dv">2</span>, ...))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(rmse)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="question-2-testing-the-getrmse-function" class="level3">
<h3 class="anchored" data-anchor-id="question-2-testing-the-getrmse-function">Question 2: Testing the <code>getRMSE()</code> function</h3>
<p>Generating data (code given in assignment) to test the <code>getRMSE()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(n)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">10</span><span class="sc">*</span>x <span class="sc">+</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(<span class="fu">lm</span>(resp <span class="sc">~</span> x), <span class="fu">data.frame</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="testing-with-no-na-values" class="level4">
<h4 class="anchored" data-anchor-id="testing-with-no-na-values">Testing with no <code>NA</code> values</h4>
<p>Testing <code>getRMSE()</code> with <code>resp</code> and <code>pred</code> .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE</span>(<span class="at">responses =</span> resp,<span class="at">predictions =</span> pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9581677</code></pre>
</div>
</div>
</section>
<section id="testing-with-vectors-containing-na_real_" class="level4">
<h4 class="anchored" data-anchor-id="testing-with-vectors-containing-na_real_">Testing with vectors containing <code>NA_real_</code></h4>
<p>Replacing two random observations (choosing index at random using <code>sample()</code> from 1: <code>length(resp)</code> in <code>resp</code> with <code>NA_real_</code> .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">55</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>random_index <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(resp),<span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>resp[random_index[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>resp[random_index[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(resp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<section id="rmse-without-handling-na" class="level5">
<h5 class="anchored" data-anchor-id="rmse-without-handling-na">RMSE without handling <code>NA</code></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE</span>(<span class="at">predictions =</span> pred,<span class="at">responses =</span> resp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</section>
<section id="rmse-with-an-argument-for-handling-na" class="level5">
<h5 class="anchored" data-anchor-id="rmse-with-an-argument-for-handling-na">RMSE with an argument for handling <code>NA</code></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getRMSE</span>(<span class="at">predictions =</span> pred,<span class="at">responses =</span> resp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9542739</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="question-3-creating-getmae-function" class="level3">
<h3 class="anchored" data-anchor-id="question-3-creating-getmae-function">Question 3: Creating <code>getMAE()</code> function</h3>
<p>Creating <code>getMAE()</code> function similar to <code>getRMSE()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>getMAE <span class="ot">&lt;-</span> <span class="cf">function</span>(responses, predictions, ...) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ensuring the responses and predictions are numeric vectors of the same length</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(responses) <span class="sc">!=</span> <span class="fu">length</span>(predictions) <span class="sc">|</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(responses)) <span class="sc">|</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(predictions))) {</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Input vectors 'responses' and 'predictions' must be numeric and of the same length."</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculating MAE </span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  mae <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">abs</span>(responses <span class="sc">-</span> predictions), ...)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(mae)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="question-4-testing-the-getmae-function" class="level3">
<h3 class="anchored" data-anchor-id="question-4-testing-the-getmae-function">Question 4: Testing the <code>getMAE()</code> function</h3>
<p>Generating data (code given in assignment) to test the <code>getMAE()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(n)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">10</span><span class="sc">*</span>x <span class="sc">+</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(<span class="fu">lm</span>(resp <span class="sc">~</span> x), <span class="fu">data.frame</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="testing-with-no-na-values-1" class="level4">
<h4 class="anchored" data-anchor-id="testing-with-no-na-values-1">Testing with no <code>NA</code> values</h4>
<p>Testing <code>getMAE()</code> with <code>resp</code> and <code>pred</code> .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getMAE</span>(<span class="at">responses =</span> resp,<span class="at">predictions =</span> pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8155776</code></pre>
</div>
</div>
</section>
<section id="testing-with-vectors-containing-na_real_-1" class="level4">
<h4 class="anchored" data-anchor-id="testing-with-vectors-containing-na_real_-1">Testing with vectors containing <code>NA_real_</code></h4>
<p>Replacing two random observations (choosing index at random using <code>sample()</code> from 1: <code>length(resp)</code> in <code>resp</code> with <code>NA_real_</code> .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">35</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>random_index <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(resp),<span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>resp[random_index[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>resp[random_index[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(resp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<section id="mae-without-handling-na" class="level5">
<h5 class="anchored" data-anchor-id="mae-without-handling-na">MAE without handling <code>NA</code></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getMAE</span>(<span class="at">predictions =</span> pred,<span class="at">responses =</span> resp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</section>
<section id="mae-with-an-argument-for-handling-na" class="level5">
<h5 class="anchored" data-anchor-id="mae-with-an-argument-for-handling-na">MAE with an argument for handling <code>NA</code></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getMAE</span>(<span class="at">predictions =</span> pred,<span class="at">responses =</span> resp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8089497</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="question-5-wrapper-function" class="level3">
<h3 class="anchored" data-anchor-id="question-5-wrapper-function">Question 5: Wrapper Function</h3>
<p>Creating <code>getMetrics()</code> which calls the helper function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>getMetrics <span class="ot">&lt;-</span> <span class="cf">function</span>(responses, predictions,<span class="at">metric =</span> <span class="st">"BOTH"</span>, ...) {</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ensuring the responses and predictions are numeric vectors of the same length</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(responses) <span class="sc">!=</span> <span class="fu">length</span>(predictions) <span class="sc">|</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(responses)) <span class="sc">|</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(predictions)) <span class="sc">|</span> (<span class="sc">!</span><span class="fu">is.vector</span>(responses)) <span class="sc">|</span> (<span class="sc">!</span><span class="fu">is.vector</span>(responses))) {</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Input vectors 'responses' and 'predictions' must be numeric and of the same length."</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculating metrics </span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  RMSE<span class="ot">&lt;-</span> <span class="fu">getRMSE</span>(<span class="at">responses =</span> responses, <span class="at">predictions =</span> predictions,...)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  MAE <span class="ot">&lt;-</span> <span class="fu">getMAE</span>(<span class="at">responses =</span> responses, <span class="at">predictions =</span> predictions,...)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  METRICS <span class="ot">&lt;-</span> <span class="fu">c</span>(RMSE,MAE)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(METRICS) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"RMSE"</span>,<span class="st">"MAE"</span>)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (metric <span class="sc">==</span> <span class="st">"BOTH"</span>){</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(METRICS)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (metric <span class="sc">==</span> <span class="st">"RMSE"</span>){</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(METRICS[<span class="dv">1</span>])</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (metric <span class="sc">==</span> <span class="st">"MAE"</span>){</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(METRICS[<span class="dv">2</span>])</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Choose RMSE,MAE or BOTH"</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="question-6-testing-getmetrics" class="level3">
<h3 class="anchored" data-anchor-id="question-6-testing-getmetrics">Question 6: Testing <code>getMetrics()</code></h3>
<p>Generating data (code given in assignment) to test the <code>getMetrics()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(n)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">10</span><span class="sc">*</span>x <span class="sc">+</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(<span class="fu">lm</span>(resp <span class="sc">~</span> x), <span class="fu">data.frame</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="calling-specific-metric" class="level4">
<h4 class="anchored" data-anchor-id="calling-specific-metric">Calling specific metric</h4>
<section id="calling-for-rmse" class="level5">
<h5 class="anchored" data-anchor-id="calling-for-rmse">Calling for RMSE</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getMetrics</span>(<span class="at">predictions =</span> pred,<span class="at">responses =</span> resp,<span class="at">metric =</span> <span class="st">"RMSE"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     RMSE 
0.9581677 </code></pre>
</div>
</div>
</section>
<section id="calling-for-mae" class="level5">
<h5 class="anchored" data-anchor-id="calling-for-mae">Calling for MAE</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getMetrics</span>(<span class="at">predictions =</span> pred,<span class="at">responses =</span> resp,<span class="at">metric =</span> <span class="st">"MAE"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      MAE 
0.8155776 </code></pre>
</div>
</div>
</section>
<section id="calling-for-both" class="level5">
<h5 class="anchored" data-anchor-id="calling-for-both">Calling for BOTH</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getMetrics</span>(<span class="at">predictions =</span> pred,<span class="at">responses =</span> resp,<span class="at">metric =</span> <span class="st">"BOTH"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     RMSE       MAE 
0.9581677 0.8155776 </code></pre>
</div>
</div>
</section>
</section>
<section id="testing-with-na-values" class="level4">
<h4 class="anchored" data-anchor-id="testing-with-na-values">Testing with <code>NA</code> values</h4>
<p>Replacing two random observations similar to previous instance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">45</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>random_index <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(resp),<span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>resp[random_index[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>resp[random_index[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(resp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<section id="getmetrics-without-handling-na" class="level5">
<h5 class="anchored" data-anchor-id="getmetrics-without-handling-na"><code>getMetrics</code> without handling <code>NA</code></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getMetrics</span>(<span class="at">predictions =</span> pred,<span class="at">responses =</span> resp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>RMSE  MAE 
  NA   NA </code></pre>
</div>
</div>
</section>
<section id="getmetrics-with-an-argument-for-handling-na" class="level5">
<h5 class="anchored" data-anchor-id="getmetrics-with-an-argument-for-handling-na"><code>getMetrics</code> with an argument for handling <code>NA</code></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getMetrics</span>(<span class="at">predictions =</span> pred,<span class="at">responses =</span> resp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     RMSE       MAE 
0.9638196 0.8199386 </code></pre>
</div>
</div>
</section>
<section id="getmetrics-with-incorrect-data" class="level5">
<h5 class="anchored" data-anchor-id="getmetrics-with-incorrect-data"><code>getMetrics</code> with incorrect data</h5>
<p>Passing in a dataframe instead of a vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getMetrics</span>(<span class="at">predictions =</span> <span class="fu">data.frame</span>(x),<span class="at">responses =</span> resp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in getMetrics(predictions = data.frame(x), responses = resp, na.rm = TRUE): Input vectors 'responses' and 'predictions' must be numeric and of the same length.</code></pre>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="task-3-quering-an-api-and-a-tidy-style-function" class="level2">
<h2 class="anchored" data-anchor-id="task-3-quering-an-api-and-a-tidy-style-function">Task 3: Quering an API and a Tidy-Style Function</h2>
<p>Necessary Packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'jsonlite'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    flatten</code></pre>
</div>
</div>
<section id="question-1-querying-the-api-and-storing-as-json-." class="level3">
<h3 class="anchored" data-anchor-id="question-1-querying-the-api-and-storing-as-json-.">Question 1: Querying the API and storing as <code>JSON</code> .</h3>
<section id="section" class="level4">
<h4 class="anchored" data-anchor-id="section"></h4>
<p>Using a URL to query the News API for top headlines using <code>GET()</code>, then retrieing raw content, converting it to a character string with <code>rawToChar()</code>, and parsing it into a structured R object using <code>fromJSON()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://newsapi.org/v2/top-headlines?country=gb&amp;q=Euro&amp;from=2024-05-25&amp;to=2024-06-25&amp;category=sports&amp;apiKey=&lt;key_stored_locally&gt;"</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>news <span class="ot">&lt;-</span> <span class="fu">GET</span>(url)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>news_data <span class="ot">&lt;-</span> <span class="fu">rawToChar</span>(news<span class="sc">$</span>content)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>news_json <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(news_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="question-2-returning-the-dataframe-with-articles-information-." class="level3">
<h3 class="anchored" data-anchor-id="question-2-returning-the-dataframe-with-articles-information-.">Question 2: Returning the dataframe with articles information .</h3>
<p>Extracting <code>news_json$articles</code> which contains the all the information about articles as dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>news_json<span class="sc">$</span>articles</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
</section>
<section id="question-3-creating-a-tidy-style-function-for-querying-newsapi-." class="level3">
<h3 class="anchored" data-anchor-id="question-3-creating-a-tidy-style-function-for-querying-newsapi-.">Question 3: Creating a Tidy Style Function for Querying NewsAPI .</h3>
<section id="creating-the-function" class="level4">
<h4 class="anchored" data-anchor-id="creating-the-function">Creating the function</h4>
<p>Creating a function to query the API using a keyword, from_date and key as an input.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>news_api <span class="ot">&lt;-</span> <span class="cf">function</span>(keyword, from_date, api_key) {</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  base_url <span class="ot">&lt;-</span> <span class="st">"https://newsapi.org/v2/top-headlines"</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Construct the URL with parameters</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> <span class="fu">modify_url</span>(</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    base_url,</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">query =</span> <span class="fu">list</span>(</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">q =</span> keyword,</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">from =</span> from_date,</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">to =</span> <span class="fu">Sys.Date</span>(),  <span class="co"># Today</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">apiKey =</span> api_key</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make the API request</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>  news <span class="ot">&lt;-</span> <span class="fu">GET</span>(url)</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>  news_data <span class="ot">&lt;-</span> <span class="fu">rawToChar</span>(news<span class="sc">$</span>content)</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>  news_json <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(news_data)</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>  news_json<span class="sc">$</span>articles</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="testing-the-function" class="level4">
<h4 class="anchored" data-anchor-id="testing-the-function">Testing the function</h4>
<p>Testing the function using the <code>keyword</code> = “Euro”, <code>from_date</code> = “2024-05-25”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">news_api</span>(<span class="at">keyword =</span> <span class="st">"Euro"</span>,<span class="at">from_date =</span> <span class="st">"2024-05-25"</span>,<span class="at">api_key =</span> <span class="st">"e715bbaccd5849a0baf5c9fa6eb42a68"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      source.id source.name             author
1       reuters     Reuters        Andrew Gray
2     bbc-sport   BBC Sport               &lt;NA&gt;
3     bbc-sport   BBC Sport               &lt;NA&gt;
4     bbc-sport   BBC Sport               &lt;NA&gt;
5 four-four-two FourFourTwo          Joe Mewis
6 four-four-two FourFourTwo Callum Rice-Coates
                                                                                      title
1                 Ukraine set for symbolic start of EU membership talks, along with Moldova
2                           Euro 2024: England qualify for last 16 after Spain beat Albania
3                 Albania 0-1 Spain: Ferran Torres goal secures Euro 2024 100% group record
4                                                          Croatia vs Italy: UEFA Euro 2024
5  WATCH: Copa America wheels out brilliant Euros innovation that's been missing in Germany
6 ‘It’s hard to watch’ Wayne Rooney offers sympathy to Luka Modric after Croatia heartbreak
                                                                                                                                                                                                                                    description
1 The European Union will open membership talks with Ukraine on Tuesday, giving the country a political boost in the midst of its war against Russia's invasion, although a long and tough road still lies ahead before it could join the bloc.
2                                                                                                                                   England qualify for the last 16 of Euro 2024 with a group game to spare after Spain beat Albania on Monday.
3                                                                                                                     Spain get the better of Albania as an early goal from Ferran Torres in Dusseldorf extends their 100% record at Euro 2024.
4                                                                                                                                        Follow live text commentary, score updates and match stats from Croatia vs Italy in the UEFA Euro 2024
5                                                                                                                                    The tiny car was one of our favourite Euro 2020 innovations and it's now headed stateside for Copa America
6                                                                                                                                                     Croatia conceded a dramatic late equaliser against Italy in their crucial Euro 2024 clash
                                                                                                                      url
1      https://www.reuters.com/world/europe/ukraine-set-symbolic-start-eu-membership-talks-along-with-moldova-2024-06-25/
2                                                               http://www.bbc.co.uk/sport/football/articles/cx000e5xj1zo
3                                                                   http://www.bbc.co.uk/sport/football/live/cn00v9krdg9t
4                                                                   http://www.bbc.co.uk/sport/football/live/cpvvg6kdgrvt
5 https://www.fourfourtwo.com/news/watch-copa-america-wheels-out-brilliant-euros-innovation-thats-been-missing-in-germany
6                                             https://www.fourfourtwo.com/news/wayne-rooney-luka-modric-croatia-euro-2024
                                                                                                                                                                            urlToImage
1 https://www.reuters.com/resizer/v2/KYYT63NDQVI2VENML2LZ7WBKOA.jpg?auth=3c4ac6f4c29e6ca4cb659a24c0bf06466cc40b799f7deb657cf5157eb8b7ce4f&amp;height=1005&amp;width=1920&amp;quality=80&amp;smart=true
2                                                                                  https://ichef.bbci.co.uk/news/1024/branded_sport/77cd/live/f3e87570-3238-11ef-bc72-51b61c17135e.jpg
3                                                                                   https://static.files.bbci.co.uk/ws/simorgh-assets/public/sport/images/metadata/poster-1024x576.png
4                                                                                   https://static.files.bbci.co.uk/ws/simorgh-assets/public/sport/images/metadata/poster-1024x576.png
5                                                                                                                 https://cdn.mos.cms.futurecdn.net/x4ZMz8RiEH3xaHxxLmwVyC-1200-80.jpg
6                                                                                                                 https://cdn.mos.cms.futurecdn.net/5jtq6K4KLmQy2D3JhKSRbX-1200-80.jpg
                   publishedAt
1         2024-06-25T00:07:19Z
2 2024-06-24T22:07:18.5807287Z
3 2024-06-24T22:07:15.5658533Z
4 2024-06-24T22:07:12.6899581Z
5         2024-06-24T22:00:55Z
6         2024-06-24T21:58:08Z
                                                                                                                                                                                                                   content
1                                                                                                                                                                                                                     &lt;NA&gt;
2  England have qualified for the last 16 of Euro 2024 with a group game to spare after Spain beat Albania 1-0 on Monday.\r\nVictory for Luis de la Fuente's side also means the Netherlands and France prog… [+939 chars]
3 Three-time European champions Spain had already secured top spot thanks to wins over Croatia and Italy, so coach Luis de la Fuente was able to make 10 changes to his starting line-up.\r\nThe substituti… [+1514 chars]
4  Croatias players collapsed to the ground at the final whistle, while their fans stood motionless in the stands, staring in disbelief at what had just unfolded.\r\nThe 2018 World Cup finalists had been … [+960 chars]
5   As we reach the tail end of the Euro 2024 group stage, the tournament in Germany has been pretty entertaining so far. We’ve had brilliant goals, last-minute winners, an under-the-radar instant classi… [+2323 chars]
6 Wayne Rooney was quick to offer his condolences to Luka Modric after Croatia were all but knocked out of Euro 2024 after conceding a late equaliser against Italy.\r\nThe former Manchester United strike… [+1744 chars]</code></pre>
</div>
</div>
<p>Trying with different keyword and different data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">news_api</span>(<span class="at">keyword =</span> <span class="st">"UEFA"</span>,<span class="at">from_date =</span> <span class="st">"2024-06-05"</span>,<span class="at">api_key =</span> <span class="st">"e715bbaccd5849a0baf5c9fa6eb42a68"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         source.id      source.name                   author
1        bbc-sport        BBC Sport                     &lt;NA&gt;
2             espn             ESPN                     &lt;NA&gt;
3 goteborgs-posten Göteborgs-Posten Kasper Ljungström/TT, TT
4          lequipe         L'equipe                 L'EQUIPE
                                                                                                           title
1                                                                               Croatia vs Italy: UEFA Euro 2024
2                                                          Croatia 1-1 Italy (Jun 24, 2024) Game Analysis - ESPN
3                                                                     Danmark straffas av Uefa – efter banderoll
4 L'UEFA a donné des consignes de sécurité aux supporters de Manchester City avant la finale de la Ligue des ...
                                                                                                                                                                                                                                                           description
1                                                                                                                                                               Follow live text commentary, score updates and match stats from Croatia vs Italy in the UEFA Euro 2024
2                                                                                                                                                  Expert recap and game analysis of the Croatia vs. Italy Uefa European Championship game from June 24, 2024 on ESPN.
3 Enligt danska &lt;a href="https://sport.tv2.dk/fodbold/2024-06-23-dbu-straffet-vil-finde-de-skyldige" id="Jc5e98ssZRdLn20C"&gt;TV2&lt;/a&gt; har det danska fotbollsförbundet straffats med böter.&lt;br/&gt;Detta efter att en dansk supporter hållit upp en banderoll med budskapet…
4 Selon le «&nbsp;Daily Mail&nbsp;», l'UEFA a envoyé ses consignes de sécurité aux supporters de Manchester City avant la finale de Ligue des champions qui opposera les Citizens à l'Inter, samedi, à Istanbul (21&nbsp;heures). Un an après les incidents du Stade de France, l'in…
                                                                                                                                                                      url
1                                                                                                                   http://www.bbc.co.uk/sport/football/live/cpvvg6kdgrvt
2                                                                                                                      https://www.espn.com/soccer/report/_/gameId/690599
3                                                                    http://www.gp.se/sport/danmark-straffas-av-uefa-efter-banderoll.03a8d9ed-3166-53dc-b557-1cfa904d5bb9
4 https://www.lequipe.fr/Football/Actualites/L-uefa-a-donne-des-consignes-de-securite-aux-supporters-de-manchester-city-avant-la-finale-de-la-ligue-des-champions/1401508
                                                                                                                                                                                        urlToImage
1                                                                                               https://static.files.bbci.co.uk/ws/simorgh-assets/public/sport/images/metadata/poster-1024x576.png
2                                                                                                                           https://a.espncdn.com/combiner/i?img=/i/espn/misc_logos/500/soccer.png
3                                                                                 https://www.gp.se/images/og/03a8d9ed-3166-53dc-b557-1cfa904d5bb9/images/1VVjOncsbqLWmJWWnERX2713ID1Q-REGULAR.jpg
4 https://medias.lequipe.fr/img-photo-jpg/les-supporters-de-manchester-city-devront-arriver-au-stade-avec-neuf-heures-d-avance-selon-le-daily-/1500000001795954/0:0,1997:1332-640-427-75/21760.jpg
                   publishedAt
1 2024-06-24T22:07:12.6899581Z
2 2024-06-24T21:22:12.1904812Z
3         2024-06-24T10:24:55Z
4    2023-06-08T14:11:05+00:00
                                                                                                                                                                                                                  content
1 Croatias players collapsed to the ground at the final whistle, while their fans stood motionless in the stands, staring in disbelief at what had just unfolded.\r\nThe 2018 World Cup finalists had been … [+960 chars]
2  An added time goal from Italy's Mattia Zaccagni snatched a 1-1 draw with Croatia which was enough to earn them a place in the last 16 of Euro 2024 as Group B runners-up where they will face Switzerla… [+1059 chars]
3 Boten ska enligt den danska sajten ligga på 10&nbsp;000 euro, motsvarande drygt 112&nbsp;000 svenska kronor.\r\nErik Brøgger Rasmussen, direktör för det danska fotbollsförbundet, berättar att förbundet kommer at… [+708 chars]
4   Un an après les incidents au Stade de France et le traumatisme de milliers de supporters anglais, l'UEFA voudrait s'assurer que de tels dysfonctionnements ne se reproduisent plus.&nbsp;Le 28&nbsp;mai 2022, l'a… [+485 chars]</code></pre>
</div>
</div>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>